# mmap

- 用于用户态内存映射(文件映射、申请较大内存的匿名映射(申请小内存用brk))；
- 用户态的页表结构，存储在mm_struct中；
- 访问没有映射的内存时触发缺页异常 -> 分配物理页表 -> 补齐页表;

> 对于匿名映射：分配物理内存；
> 对于swap，读入swap文件；
> 对于文件映射，读入文件；

![image](https://github.com/ingangi/blog/blob/master/img/mmap.jpg)

## 快表TLB

- 不在内存中，是专门用来做地址映射的硬件设备，存储的数据少，但是比内存快；
- 是页表的cache，存储了当前最可能被访问到的页表项，是部分页表项(PTE)的副本；
- 如果没有TLB，则每次取数据都需要两次访问内存，即查页表获得物理地址和取数据。
- TLB的命中概率，直接影响程序运行的性能。